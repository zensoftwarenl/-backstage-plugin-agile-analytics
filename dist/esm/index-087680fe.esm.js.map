{"version":3,"file":"index-087680fe.esm.js","sources":["../../src/helpers.ts","../../src/api/index.ts","../../src/routes.ts","../../src/plugin.ts"],"sourcesContent":["import moment from 'moment';\r\nimport { Ticket } from './api/types';\r\n\r\n// encoding\r\nexport function encodeApiKey(key: string): string {\r\n  const encoded = Buffer.from(`${key}`).toString('base64');\r\n  return encoded;\r\n}\r\n\r\n// timeperiod\r\nexport function getStartDate(\r\n  amount: number,\r\n  period: 'days' | 'months',\r\n): number {\r\n  return moment()\r\n    .set({ hours: 0, minutes: 0, seconds: 0 })\r\n    .subtract(amount, period)\r\n    .unix();\r\n}\r\n\r\nexport function getEndDate(): number {\r\n  return moment().set({ hours: 23, minutes: 59, seconds: 59 }).unix();\r\n}\r\n\r\n// si page\r\nexport function getUniqueListByParent(arr: Ticket[]) {\r\n  const uniqueListOfLatest: Ticket[] = arr.reduce(\r\n    (acc: Ticket[], item: Ticket) => {\r\n      const isInList = acc.find(\r\n        ticket => ticket.parent.key === item.parent.key,\r\n      );\r\n      if (isInList) {\r\n        const isLater = item.timestamp >= isInList.timestamp;\r\n        if (isLater) {\r\n          return acc.map(task => {\r\n            if (task.parent.key === item.parent.key) {\r\n              return item;\r\n            }\r\n            return task;\r\n          });\r\n        }\r\n        return acc;\r\n      }\r\n      return [...acc, item];\r\n    },\r\n    [],\r\n  );\r\n\r\n  return uniqueListOfLatest;\r\n}\r\n","import { createApiRef, DiscoveryApi } from '@backstage/core-plugin-api';\r\nimport { encodeApiKey } from '../helpers';\r\nimport {\r\n  ApiConstructorOptions,\r\n  DeploymentFreqResponse,\r\n  LeadTimeResponse,\r\n  LeaksResponse,\r\n  OrganisationDataOptions,\r\n  OrganisationDataResponse,\r\n  ReposDataOptions,\r\n  ReposDataResponse,\r\n  RiskChartData,\r\n  RiskChartResponse,\r\n  SiDataOptions,\r\n  SiDataResponse,\r\n} from './types';\r\n\r\nexport interface AgileAnalyticsAPI {\r\n  getOrganisationData(\r\n    options: OrganisationDataOptions,\r\n  ): Promise<OrganisationDataResponse>;\r\n  getSiData(options: SiDataOptions): Promise<SiDataResponse>;\r\n  getReposData(options: ReposDataOptions): Promise<ReposDataResponse>;\r\n  getDeploymentFreqData(\r\n    options: SiDataOptions,\r\n  ): Promise<DeploymentFreqResponse>;\r\n  getLeadTimeData(options: SiDataOptions): Promise<LeadTimeResponse>;\r\n  getStockData(options: SiDataOptions): Promise<any>;\r\n  getRiskChartData(options: SiDataOptions): Promise<RiskChartResponse>;\r\n  getLeaksData(options: SiDataOptions): Promise<LeaksResponse>;\r\n}\r\n\r\nexport const agileAnalyticsApiRef = createApiRef<AgileAnalyticsAPI>({\r\n  id: 'plugin.agile-analytics.service',\r\n});\r\n\r\nconst DEFAULT_PROXY_PATH = 'https://api.prod.agileanalytics.cloud';\r\n\r\nfunction generateRequestParams(apiKey: string) {\r\n  return {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Api-Key': `${encodeApiKey(apiKey)}`,\r\n      'Access-Control-Allow-Origin': '*',\r\n    },\r\n  };\r\n}\r\n\r\nasync function generateErrorMessage(res: Response) {\r\n  if (res.statusText?.length) {\r\n    return res.statusText;\r\n  }\r\n  const errorText = await res.text();\r\n  if (errorText?.length) {\r\n    return errorText;\r\n  }\r\n  if (res.status) {\r\n    return res.status;\r\n  }\r\n  return 'unknown error.';\r\n}\r\n\r\nexport class AgileAnalyticsAPIClient implements AgileAnalyticsAPI {\r\n  private readonly proxyPath: string;\r\n\r\n  constructor(options: ApiConstructorOptions) {\r\n    this.proxyPath = DEFAULT_PROXY_PATH;\r\n  }\r\n\r\n  async getOrganisationData(\r\n    options: OrganisationDataOptions,\r\n  ): Promise<OrganisationDataResponse> {\r\n    const response = await fetch(\r\n      `${this.proxyPath}/${options.orgHash}/settings/organisations/`,\r\n      generateRequestParams(options.apiKey),\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(\r\n        `There was a problem fetching analytics data: ${await generateErrorMessage(\r\n          response,\r\n        )}`,\r\n      );\r\n    }\r\n\r\n    const { org_hash, org_name, number_of_users, status, subscription_level } =\r\n      await response.json();\r\n    const orgState = {\r\n      orgHash: org_hash,\r\n      orgName: org_name,\r\n      usersNumber: number_of_users,\r\n      status,\r\n      subscription: subscription_level,\r\n    };\r\n\r\n    return orgState;\r\n  }\r\n\r\n  async getSiData(options: SiDataOptions): Promise<SiDataResponse> {\r\n    const limit = 50;\r\n    let totalData: SiDataResponse = {\r\n      featuresAmount: 0,\r\n      notFeaturesAmount: 0,\r\n      featuresTime: 0,\r\n      notFeaturesTime: 0,\r\n      tickets: [],\r\n    };\r\n    let offset = 0;\r\n    let response: any = null;\r\n\r\n    do {\r\n      response = await fetch(\r\n        `${this.proxyPath}/${options.orgHash}/si/?date_start=${options.dateStart}&date_end=${options.dateEnd}&issue_key=^.*$&label=^.*$&transition_from=^.*$&transition_to=^Done$&limit=${limit}&offset=${offset}`, // &limit=50&offset=0 <--- add for pagination???\r\n        generateRequestParams(options.apiKey),\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\r\n          `There was a problem fetching analytics data: ${await generateErrorMessage(\r\n            response,\r\n          )}`,\r\n        );\r\n      }\r\n\r\n      if (response.status === 200) {\r\n        const { features, not_features, time_spent, tickets } =\r\n          await response.json();\r\n        const siState = {\r\n          featuresAmount: features,\r\n          notFeaturesAmount: not_features,\r\n          featuresTime: time_spent?.feature ?? 0,\r\n          notFeaturesTime: time_spent?.['not feature'] ?? 0,\r\n          tickets,\r\n        };\r\n\r\n        totalData = {\r\n          featuresAmount: totalData.featuresAmount + siState.featuresAmount,\r\n          notFeaturesAmount:\r\n            totalData.notFeaturesAmount + siState.notFeaturesAmount,\r\n          featuresTime: totalData.featuresTime + siState.featuresTime,\r\n          notFeaturesTime: totalData.notFeaturesTime + siState.notFeaturesTime,\r\n          tickets: [...totalData.tickets, ...siState.tickets],\r\n        };\r\n\r\n        offset += limit;\r\n      }\r\n    } while (response?.status !== 204);\r\n\r\n    return totalData;\r\n  }\r\n\r\n  async getReposData(options: ReposDataOptions): Promise<ReposDataResponse> {\r\n    const response = await fetch(\r\n      `${this.proxyPath}/${options.orgHash}/swarm/selected/`,\r\n      generateRequestParams(options.apiKey),\r\n    );\r\n    if (!response.ok) {\r\n      throw new Error(\r\n        `There was a problem fetching analytics data: ${await generateErrorMessage(\r\n          response,\r\n        )}`,\r\n      );\r\n    }\r\n\r\n    const reposState = await response.json();\r\n\r\n    return reposState;\r\n  }\r\n\r\n  async getDeploymentFreqData(\r\n    options: SiDataOptions,\r\n  ): Promise<DeploymentFreqResponse> {\r\n    const response = await fetch(\r\n      `${this.proxyPath}/${options.orgHash}/dora/deployment_frequency/?date_start=${options.dateStart}&date_end=${options.dateEnd}`,\r\n      generateRequestParams(options.apiKey),\r\n    );\r\n    if (!response.ok) {\r\n      throw new Error(\r\n        `There was a problem fetching analytics data: ${await generateErrorMessage(\r\n          response,\r\n        )}`,\r\n      );\r\n    }\r\n\r\n    const state = await response.json();\r\n\r\n    return state;\r\n  }\r\n\r\n  async getLeadTimeData(options: SiDataOptions): Promise<LeadTimeResponse> {\r\n    const response = await fetch(\r\n      `${this.proxyPath}/${options.orgHash}/dora/lead_time/?date_start=${options.dateStart}&date_end=${options.dateEnd}`,\r\n      generateRequestParams(options.apiKey),\r\n    );\r\n    if (!response.ok) {\r\n      throw new Error(\r\n        `There was a problem fetching analytics data: ${await generateErrorMessage(\r\n          response,\r\n        )}`,\r\n      );\r\n    }\r\n\r\n    const state = await response.json();\r\n\r\n    return state;\r\n  }\r\n\r\n  async getStockData(options: SiDataOptions): Promise<any> {\r\n    const response = await fetch(\r\n      `${this.proxyPath}/${options.orgHash}/stock/branches/?date_start=${options.dateStart}&date_end=${options.dateEnd}`,\r\n      generateRequestParams(options.apiKey),\r\n    );\r\n    if (!response.ok) {\r\n      throw new Error(\r\n        `There was a problem fetching analytics data: ${await generateErrorMessage(\r\n          response,\r\n        )}`,\r\n      );\r\n    }\r\n\r\n    const state = await response.json();\r\n\r\n    return state;\r\n  }\r\n\r\n  async getRiskChartData(options: SiDataOptions): Promise<RiskChartResponse> {\r\n    let riskDataResponce = { low: 0, medium: 0, high: 0 };\r\n    const response = await fetch(\r\n      `${this.proxyPath}/${options.orgHash}/stock/risk/?date_start=${options.dateStart}&date_end=${options.dateEnd}`,\r\n      generateRequestParams(options.apiKey),\r\n    );\r\n    if (!response.ok) {\r\n      throw new Error(\r\n        `There was a problem fetching analytics data: ${await generateErrorMessage(\r\n          response,\r\n        )}`,\r\n      );\r\n    }\r\n\r\n    const tableData = await response.json();\r\n\r\n    if (tableData?.length) {\r\n      const reposData = await Promise.allSettled(\r\n        tableData.map(async (repo: RiskChartData) => {\r\n          const res = await fetch(\r\n            `${this.proxyPath}/${options.orgHash}/stock/risk/?date_start=${\r\n              options.dateStart\r\n            }&date_end=${options.dateEnd}\r\n              &direction=start&sort=branch&repository=${\r\n                repo.repo_name\r\n              }&start=0&end=${repo.table_rows - 1}`,\r\n            generateRequestParams(options.apiKey),\r\n          );\r\n\r\n          if (!res.ok) {\r\n            throw new Error(\r\n              `There was a problem fetching analytics data: ${await generateErrorMessage(\r\n                response,\r\n              )}`,\r\n            );\r\n          }\r\n\r\n          const data = await res.json();\r\n\r\n          return data;\r\n        }),\r\n      );\r\n\r\n      if (reposData.length) {\r\n        let status = 200;\r\n        if (\r\n          !reposData.find(\r\n            value => value.status === 'fulfilled' && value?.value?.length > 0,\r\n          )\r\n        ) {\r\n          status = 204;\r\n        }\r\n\r\n        riskDataResponce = reposData\r\n          .filter(repo => repo.status === 'fulfilled')\r\n          .reduce(\r\n            (\r\n              acc: {\r\n                low: number;\r\n                medium: number;\r\n                high: number;\r\n              },\r\n              repo,\r\n            ) => {\r\n              if ((repo as PromiseFulfilledResult<any>)?.value?.length) {\r\n                const repoRiskData = (\r\n                  repo as PromiseFulfilledResult<any>\r\n                )?.value?.reduce(\r\n                  (\r\n                    riskCounter: {\r\n                      low: number;\r\n                      medium: number;\r\n                      high: number;\r\n                    },\r\n                    row: { risk: string },\r\n                  ) => {\r\n                    switch (row.risk) {\r\n                      case 'highest':\r\n                      case 'high':\r\n                        return {\r\n                          ...riskCounter,\r\n                          high: riskCounter.high + 1,\r\n                        };\r\n                      case 'medium':\r\n                        return {\r\n                          ...riskCounter,\r\n                          medium: riskCounter.medium + 1,\r\n                        };\r\n                      case 'low':\r\n                      case 'lowest':\r\n                        return {\r\n                          ...riskCounter,\r\n                          low: riskCounter.low + 1,\r\n                        };\r\n                      default:\r\n                        return riskCounter;\r\n                    }\r\n                  },\r\n                  {\r\n                    low: 0,\r\n                    medium: 0,\r\n                    high: 0,\r\n                  },\r\n                );\r\n\r\n                return {\r\n                  low: acc.low + repoRiskData.low,\r\n                  medium: acc.medium + repoRiskData.medium,\r\n                  high: acc.high + repoRiskData.high,\r\n                };\r\n              }\r\n              return acc;\r\n            },\r\n            { low: 0, medium: 0, high: 0 },\r\n          );\r\n      }\r\n    }\r\n\r\n    return riskDataResponce;\r\n  }\r\n  async getLeaksData(options: SiDataOptions): Promise<LeaksResponse> {\r\n    const response = await fetch(\r\n      `${this.proxyPath}/${options.orgHash}/security/leaks/?date_start=${options.dateStart}&date_end=${options.dateEnd}`,\r\n      generateRequestParams(options.apiKey),\r\n    );\r\n    if (!response.ok) {\r\n      throw new Error(\r\n        `There was a problem fetching analytics data: ${await generateErrorMessage(\r\n          response,\r\n        )}`,\r\n      );\r\n    }\r\n\r\n    const state = await response.json();\r\n\r\n    return state;\r\n  }\r\n}\r\n","import { createRouteRef } from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'agile-analytics',\n});\n","import {\n  createApiFactory,\n  createPlugin,\n  createRoutableExtension,\n  discoveryApiRef,\n} from '@backstage/core-plugin-api';\nimport { AgileAnalyticsAPIClient, agileAnalyticsApiRef } from './api';\nimport { rootRouteRef } from './routes';\n\nexport const agileAnalyticsPlugin = createPlugin({\n  id: 'agile-analytics',\n  apis: [\n    createApiFactory({\n      api: agileAnalyticsApiRef,\n      deps: { discoveryApi: discoveryApiRef },\n      factory: ({ discoveryApi }) =>\n        new AgileAnalyticsAPIClient({ discoveryApi }),\n    }),\n  ],\n  routes: {\n    root: rootRouteRef,\n  },\n});\n\nexport const AgileAnalyticsPage = agileAnalyticsPlugin.provide(\n  createRoutableExtension({\n    name: 'AgileAnalyticsPage',\n    component: () =>\n      import('./components/AaMainComponent').then(m => m.AaMainComponent),\n    mountPoint: rootRouteRef,\n  }),\n);\n"],"names":[],"mappings":"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"}